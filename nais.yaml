name: pam-cv-indexer
image: repo.adeo.no:5443/pam-cv-indexer
replicas:
  min: 1
  max: 1
  cpuThresholdPercentage: 50
prometheus:
  enabled: true
  path: pam-cv-indexer/actuator/prometheus
port: 8080
healthcheck:
  liveness:
    path: pam-cv-indexer/rest/internal/isAlive
    initialDelay: 100
  readiness:
    path: pam-cv-indexer/rest/internal/isReady
    initialDelay: 100
resources:
  limits:
    cpu: 800m
    memory: 1024Mi
  requests:
    cpu: 200m
    memory: 512Mi
fasitResources:
  used:
  - alias: kafkaProperties
    resourceType: applicationProperties
  - alias: srvpam-cv-indexer-kafka
    propertyMap:
      username: KAFKA_USER
      password: KAFKA_PWD
    resourceType: credential
  - alias: pamessec
    resourceType: baseurl
    propertyMap:
      url: ES_HOSTNAME
  - alias:  aad_b2c_discovery
    resourceType: baseurl
    propertyMap:
      url: NO_NAV_SECURITY_OIDC_ISSUER_SELVBETJENING_DISCOVERYURL
  - alias: pam_elasticsearch
    resourceType: credential
    propertyMap:
      username: ES_USER
      password: ES_PASSWORD
  - alias: aad_b2c_clientid
    resourceType: credential
    propertyMap:
      username: NO_NAV_SECURITY_OIDC_ISSUER_SELVBETJENING_ACCEPTEDAUDIENCE
  - alias: pam-cv-indexer-eksternapp.altinn.serviceowner-apiKey
    resourceType: credential
    propertyMap:
      password: ALTINN_GATEWAY_APIKEY
  - alias: eksternapp.altinn.serviceowner
    resourceType: restservice
    propertyMap:
      url: ALTINN_GATEWAY_URL
  - alias: altinn.apikey
    resourceType: credential
    propertyMap:
      password: ALTINN_APIKEY
  - alias: unleash-api
    resourceType: restservice
